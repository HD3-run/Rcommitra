import{r as l,b as oe,a as le,u as ie,j as e}from"./index-Cmzhr2PI.js";import{F as ce}from"./FileUpload-C0_H3aEp.js";import{D as ue,u as E,w as me,E as xe,a as pe}from"./jspdf.plugin.autotable-D5Z2eyjb.js";import{f as R}from"./currency-DGtur7pf.js";const b=(C,c)=>{const w=new Date().toISOString();console.log(`[ACTIVITY LOG] ${w}: ${C}`,c||"")};function we(){const[C,c]=l.useState([]),[w,z]=l.useState(!0),[O,q]=l.useState("all"),[f,W]=l.useState("orderId"),[h,J]=l.useState("asc"),[j,Y]=l.useState(""),[H,D]=l.useState(!1),[k,T]=l.useState(null),[B,G]=l.useState([]),[u,I]=l.useState({userId:"",deliveryNotes:""}),[K,P]=l.useState(!1),[v,M]=l.useState(null),[x,N]=l.useState({amount:0,paymentMethod:"cash"}),[Q,A]=l.useState(!1),[n,i]=l.useState({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",productName:"",quantity:1,unitPrice:0,orderSource:"Manual"}),{lastMessage:_}=oe(),{user:F}=le();ie();const m=(F==null?void 0:F.role)||"admin";l.useEffect(()=>{ae(),y()},[m]);const y=async()=>{try{console.log("Loading orders for user role:",m);const t=await fetch("/api/orders",{credentials:"include"});if(console.log("Orders API response status:",t.status),t.ok){const s=await t.json();if(console.log("Orders API response data:",s),s.orders&&Array.isArray(s.orders)){const r=s.orders.map(a=>({id:a.order_id.toString(),orderId:`ORD${a.order_id}`,customerId:`CUS${a.customer_id}`,customerName:a.customer_name||"Unknown",amount:parseFloat(a.total_amount)||0,status:a.status||"pending",date:new Date(a.order_date||a.created_at).toISOString().split("T")[0],channel:a.order_source||"Unknown",type:"Standard",customer:a.customer_name||"Unknown",paymentStatus:a.payment_status||"pending",user_id:a.user_id}));console.log("Formatted orders:",r),c(r)}else console.log("No orders array in response or empty array"),c([])}else{console.error("Orders API failed with status:",t.status);const s=await t.text();console.error("Error response:",s),c([])}}catch(t){console.error("Failed to load orders:",t),c([])}finally{z(!1)}};l.useEffect(()=>{if(_)try{const t=JSON.parse(_);t.type==="orderStatusUpdate"&&t.orderId&&t.newStatus&&(c(s=>s.map(r=>r.orderId===t.orderId?{...r,status:t.newStatus}:r)),b("Order status updated via WebSocket",{orderId:t.orderId,newStatus:t.newStatus}))}catch(t){console.error("Failed to parse WebSocket message:",t)}},[_]);const X=async t=>{console.log("File uploaded:",t.name);const s=new FormData;s.append("file",t);try{const r=await fetch("/api/orders/upload-csv",{method:"POST",credentials:"include",body:s}),a=await r.json();r.ok?(alert(`${a.message}

Created: ${a.created} orders
Errors: ${a.errors}`),y()):alert(`Upload failed: ${a.message}`)}catch{alert("Upload failed: Network error")}b("File uploaded",{fileName:t.name,fileSize:t.size})},Z=()=>{const t=["Order ID","Customer ID","Customer Name","Channel","Status","Payment Status","Amount","Date"],s=p.map(o=>[o.orderId,o.customerId,o.customerName,o.channel,o.status,o.paymentStatus||"pending",o.amount,o.date]),r=[t,...s].map(o=>o.map(S=>`"${S}"`).join(",")).join(`
`),a=new Blob([r],{type:"text/csv;charset=utf-8;"}),d=document.createElement("a"),g=URL.createObjectURL(a);d.setAttribute("href",g),d.setAttribute("download",`orders_${new Date().toISOString().split("T")[0]}.csv`),d.style.visibility="hidden",document.body.appendChild(d),d.click(),document.body.removeChild(d),b("Orders CSV downloaded",{recordCount:p.length})},ee=()=>{const t=["Order ID","Customer ID","Customer Name","Channel","Status","Payment Status","Amount","Date"],s=p.map(d=>[d.orderId,d.customerId,d.customerName,d.channel,d.status,d.paymentStatus||"pending",d.amount,d.date]),r=E.aoa_to_sheet([t,...s]),a=E.book_new();E.book_append_sheet(a,r,"Orders"),me(a,`orders_${new Date().toISOString().split("T")[0]}.xlsx`),b("Orders Excel downloaded",{recordCount:p.length})},te=()=>{const t=new xe;t.setFontSize(16),t.text("Orders Report",14,15),t.setFontSize(10),t.text(`Generated on: ${new Date().toLocaleDateString()}`,14,25);const s=[["Order ID","Customer ID","Customer Name","Channel","Status","Payment Status","Amount","Date"]],r=p.map(a=>[a.orderId,a.customerId,a.customerName,a.channel,a.status,a.paymentStatus||"pending",R(a.amount),a.date]);pe(t,{head:s,body:r,startY:35,styles:{fontSize:8},headStyles:{fillColor:[66,139,202]}}),t.save(`orders_${new Date().toISOString().split("T")[0]}.pdf`),b("Orders PDF downloaded",{recordCount:p.length})},p=C.filter(t=>{const s=t.customerName.toLowerCase().includes(j.toLowerCase())||t.orderId.toLowerCase().includes(j.toLowerCase())||t.customerId.toLowerCase().includes(j.toLowerCase()),r=O==="all"||t.status===O;return s&&r}),$=[...p].sort((t,s)=>{const r=t[f],a=s[f];if(f==="orderId"){const d=typeof r=="string"?r:String(r??""),g=typeof a=="string"?a:String(a??""),o=parseInt(d.replace("ORD",""))||0,S=parseInt(g.replace("ORD",""))||0;return h==="asc"?o-S:S-o}return typeof r=="string"&&typeof a=="string"?h==="asc"?r.localeCompare(a):a.localeCompare(r):typeof r=="number"&&typeof a=="number"?h==="asc"?r-a:a-r:0}),ae=async()=>{if(m==="admin")try{const t=await fetch("/api/users",{credentials:"include"});if(t.ok){const s=await t.json();G(s.users.filter(r=>r.role!=="admin"))}}catch{console.error("Failed to load employees")}},se=t=>{T(t),D(!0)},re=async()=>{if(!(!k||!u.userId))try{(await fetch("/api/orders/assign",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({orderId:k.id,userId:u.userId,deliveryNotes:u.deliveryNotes})})).ok?(alert("Order assigned successfully!"),D(!1),I({userId:"",deliveryNotes:""}),T(null),y()):alert("Failed to assign order")}catch{alert("Failed to assign order")}},U=async(t,s)=>{try{const r=m==="admin"?`/api/orders/${t}/status`:`/api/employee/orders/${t}/status`;(await fetch(r,{method:m==="admin"?"PATCH":"PUT",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:s})})).ok?c(g=>g.map(o=>o.id===t?{...o,status:s}:o)):alert("Failed to update order status")}catch{alert("Failed to update order status")}},L=async(t,s,r="cash",a)=>{try{const d=await fetch(`/api/orders/${t}/payment`,{method:"PATCH",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({status:s,paymentMethod:r,amount:a})});if(d.ok)alert(`Payment marked as ${s}`),y();else{const g=await d.json();alert(`Failed to update payment: ${g.message}`)}}catch{alert("Failed to update payment status")}},V=(t,s)=>{s==="paid"?(M(t),N({amount:t.amount,paymentMethod:"cash"}),P(!0)):L(t.id,s)},de=async()=>{v&&(await L(v.id,"paid",x.paymentMethod,x.amount),P(!1),M(null),N({amount:0,paymentMethod:"cash"}))},ne=async()=>{try{console.log("Sending order data:",n);const t=await fetch("/api/orders/add-manual",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(n)});if(console.log("Response status:",t.status),t.ok)alert("Order added successfully!"),A(!1),i({customerName:"",customerPhone:"",customerEmail:"",customerAddress:"",productName:"",quantity:1,unitPrice:0,orderSource:"Manual"}),y();else{const s=await t.json();console.log("Error response:",s),t.status===401?(alert("Session expired. Please log in again."),window.location.href="/login"):alert(`Failed to add order: ${s.message||"Unknown error"}`)}}catch(t){console.error("Network error:",t),alert("Failed to add order: Network error")}};return w?e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 min-h-screen bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Orders"}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg",children:"Loading orders..."})})]}):e.jsxs("div",{className:"p-4 sm:p-6 md:p-8 min-h-screen bg-light-pink dark:bg-gray-900 text-gray-900 dark:text-white",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold mb-6 text-gray-900 dark:text-white",children:"Orders"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0 sm:space-x-4",children:[e.jsx("input",{type:"text",placeholder:"Search by customer, customer ID, or order ID...",className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md w-full sm:w-auto bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:j,onChange:t=>Y(t.target.value)}),e.jsxs("div",{className:"flex space-x-2 w-full sm:w-auto",children:[e.jsxs("select",{className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:O,onChange:t=>q(t.target.value),children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsxs("select",{className:"p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white",value:f,onChange:t=>W(t.target.value),children:[e.jsx("option",{value:"orderId",children:"Sort by Order ID"}),e.jsx("option",{value:"date",children:"Sort by Date"}),e.jsx("option",{value:"amount",children:"Sort by Amount"}),e.jsx("option",{value:"status",children:"Sort by Status"})]}),e.jsx("button",{onClick:()=>J(h==="asc"?"desc":"asc"),className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:h==="asc"?"Asc":"Desc"})]})]}),m==="admin"&&e.jsxs("div",{className:"mb-6",children:[e.jsx(ce,{onFileUpload:X}),e.jsxs("div",{className:"mt-4 p-4 bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-semibold text-blue-800 dark:text-blue-200 mb-2",children:"CSV Upload Format:"}),e.jsx("p",{className:"text-xs text-blue-700 dark:text-blue-300 mb-2",children:"Your CSV file should include these columns (in any order):"}),e.jsx("div",{className:"text-xs font-mono bg-white dark:bg-gray-800 p-2 rounded border overflow-x-auto",children:e.jsx("div",{className:"text-gray-600 dark:text-gray-400",children:"customer_name, customer_phone, customer_email, customer_address, product_name, quantity, unit_price, order_source"})}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:[e.jsx("strong",{children:"Example:"})," John Doe, +1234567890, john@email.com, 123 Main St, Product A, 2, 25.50, CSV"]}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:[e.jsx("strong",{children:"Note:"}),' You can also use spaces in column names like "Customer Name" instead of "customer_name"']})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsx(ue,{onDownloadCSV:Z,onDownloadExcel:ee,onDownloadPDF:te}),e.jsx("button",{onClick:()=>A(!0),className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors w-full",children:"Add Order Manually"})]})]}),e.jsx("div",{className:"overflow-x-auto bg-light-pink-100 dark:bg-gray-800 rounded-lg shadow",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Order ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer ID"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Customer Name"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Channel"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Type"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Order Status"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Payment"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Amount"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Date"}),e.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-light-pink-100 dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:$.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:w?"Loading orders...":m==="admin"?"No orders found. Upload a CSV file or create orders manually.":"No orders assigned to you yet. Contact your admin to assign orders."})}):$.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:t.orderId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.customerId}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.customerName}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.channel}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.type}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.status==="delivered"?"bg-green-100 text-green-800":t.status==="shipped"?"bg-blue-100 text-blue-800":t.status==="confirmed"?"bg-purple-100 text-purple-800":t.status==="assigned"?"bg-indigo-100 text-indigo-800":t.status==="pending"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:e.jsxs("div",{className:"flex flex-col space-y-1",children:[e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${t.paymentStatus==="paid"?"bg-green-100 text-green-800":t.paymentStatus==="failed"?"bg-red-100 text-red-800":t.paymentStatus==="refunded"?"bg-gray-100 text-gray-800":"bg-yellow-100 text-yellow-800"}`,children:t.paymentStatus||"pending"}),e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("button",{onClick:()=>V(t,"paid"),disabled:t.paymentStatus==="paid",className:`px-2 py-1 text-xs rounded ${t.paymentStatus==="paid"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"}`,children:"Mark Paid"}),e.jsx("button",{onClick:()=>V(t,"pending"),disabled:t.paymentStatus==="pending",className:`px-2 py-1 text-xs rounded ${t.paymentStatus==="pending"?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-yellow-500 text-white hover:bg-yellow-600"}`,children:"Mark Pending"})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:R(t.amount)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:t.date}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:m==="admin"?e.jsxs("div",{className:"flex space-x-2",children:[e.jsxs("select",{value:t.status,onChange:s=>U(t.id,s.target.value),className:"text-xs border border-gray-300 dark:border-gray-600 rounded px-1 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]}),e.jsx("button",{onClick:()=>se(t),disabled:t.status==="confirmed"||!!t.user_id,className:`text-xs ${t.status==="confirmed"||t.user_id?"text-gray-400 cursor-not-allowed":"text-green-600 hover:text-green-900 dark:text-green-400 dark:hover:text-green-200"}`,children:t.status==="confirmed"||t.user_id?"Assigned":"Assign"})]}):e.jsxs("select",{value:t.status,onChange:s=>U(t.id,s.target.value),className:"text-sm border border-gray-300 dark:border-gray-600 rounded px-2 py-1 bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"assigned",children:"Assigned"}),e.jsx("option",{value:"confirmed",children:"Confirmed"}),e.jsx("option",{value:"shipped",children:"Shipped"}),e.jsx("option",{value:"delivered",children:"Delivered"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})})]},t.id))})]})}),e.jsxs("div",{className:"mt-6 text-gray-600 dark:text-gray-400",children:[e.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Additional Features Placeholder:"}),e.jsxs("ul",{className:"list-disc list-inside",children:[e.jsx("li",{children:"Detailed order view on click"}),e.jsx("li",{children:"Pagination for large datasets"})]})]}),H&&k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Assign Order #",k.orderId]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Assign to Employee:"}),e.jsxs("select",{value:u.userId,onChange:t=>I({...u,userId:t.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select Employee"}),B.map(t=>e.jsxs("option",{value:t.user_id,children:[t.username," (",t.role,")"]},t.user_id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Delivery Notes:"}),e.jsx("textarea",{value:u.deliveryNotes,onChange:t=>I({...u,deliveryNotes:t.target.value}),placeholder:"Special instructions for delivery...",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:re,disabled:!u.userId,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Assign Order"})]})]})}),Q&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Order"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Customer Name",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.customerName,onChange:t=>i({...n,customerName:t.target.value})}),e.jsx("input",{type:"tel",placeholder:"Customer Phone",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.customerPhone,onChange:t=>i({...n,customerPhone:t.target.value})}),e.jsx("input",{type:"email",placeholder:"Customer Email",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.customerEmail,onChange:t=>i({...n,customerEmail:t.target.value})}),e.jsx("textarea",{placeholder:"Customer Address",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:2,value:n.customerAddress,onChange:t=>i({...n,customerAddress:t.target.value})}),e.jsx("input",{type:"text",placeholder:"Product Name",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.productName,onChange:t=>i({...n,productName:t.target.value})}),e.jsx("input",{type:"number",placeholder:"Quantity",min:"1",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.quantity,onChange:t=>i({...n,quantity:parseInt(t.target.value)||1})}),e.jsx("input",{type:"number",placeholder:"Unit Price",step:"0.01",min:"0",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.unitPrice,onChange:t=>i({...n,unitPrice:parseFloat(t.target.value)||0})}),e.jsxs("select",{className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:n.orderSource,onChange:t=>i({...n,orderSource:t.target.value}),children:[e.jsx("option",{value:"Manual",children:"Manual"}),e.jsx("option",{value:"Phone",children:"Phone"}),e.jsx("option",{value:"Email",children:"Email"}),e.jsx("option",{value:"Website",children:"Website"}),e.jsx("option",{value:"WhatsApp",children:"WhatsApp"})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:ne,disabled:!n.customerName||!n.productName,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Add Order"})]})]})}),K&&v&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Mark Payment as Paid - Order #",v.orderId]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Amount:"}),e.jsx("input",{type:"number",step:"0.01",min:"0",value:x.amount,onChange:t=>N({...x,amount:parseFloat(t.target.value)||0}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",placeholder:"Enter payment amount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Payment Method:"}),e.jsxs("select",{value:x.paymentMethod,onChange:t=>N({...x,paymentMethod:t.target.value}),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"cash",children:"Cash"}),e.jsx("option",{value:"card",children:"Card"}),e.jsx("option",{value:"upi",children:"UPI"}),e.jsx("option",{value:"bank_transfer",children:"Bank Transfer"}),e.jsx("option",{value:"cheque",children:"Cheque"}),e.jsx("option",{value:"other",children:"Other"})]})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>P(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:de,disabled:x.amount<=0,className:"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:opacity-50",children:"Mark as Paid"})]})]})})]})}export{we as default};
