import{r as s,a as w,u as f,j as e}from"./index-Cmzhr2PI.js";function j(){const[o,x]=s.useState([]),[p,g]=s.useState(!0),[d,h]=s.useState(""),[m,l]=s.useState(!1),[t,r]=s.useState({name:"",contactPerson:"",email:"",phone:"",address:""}),{user:i}=w();f();const y=(i==null?void 0:i.role)||"admin";s.useEffect(()=>{n()},[]);const n=async()=>{try{const a=await fetch("/api/suppliers",{credentials:"include"});if(a.ok){const b=await a.json();x(b.suppliers||[])}}catch(a){console.error("Failed to load suppliers:",a)}finally{g(!1)}},u=async()=>{try{(await fetch("/api/suppliers",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)})).ok?(alert("Supplier added successfully!"),l(!1),r({name:"",contactPerson:"",email:"",phone:"",address:""}),n()):alert("Failed to add supplier")}catch{alert("Failed to add supplier")}},c=o.filter(a=>a.supplier_name.toLowerCase().includes(d.toLowerCase())||a.contact_person.toLowerCase().includes(d.toLowerCase())||a.email.toLowerCase().includes(d.toLowerCase()));return p?e.jsxs("div",{className:"p-6 bg-gray-100 dark:bg-gray-900 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Suppliers"}),e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"text-lg text-gray-600 dark:text-gray-300",children:"Loading suppliers..."})})]}):e.jsxs("div",{className:"p-6 bg-gray-100 dark:bg-gray-900 min-h-screen",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 dark:text-white mb-6",children:"Suppliers"}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center mb-6 space-y-4 sm:space-y-0",children:[e.jsx("input",{type:"text",placeholder:"Search suppliers...",value:d,onChange:a=>h(a.target.value),className:"w-full sm:w-1/3 p-2 border border-gray-300 dark:border-gray-700 rounded-md bg-white dark:bg-gray-800 text-gray-900 dark:text-white"}),y==="admin"&&e.jsx("button",{onClick:()=>l(!0),className:"p-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 transition-colors",children:"Add Supplier"})]}),e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200 dark:divide-gray-700",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Supplier Name"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Contact Person"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Phone"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Address"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider",children:"Added"})]})}),e.jsx("tbody",{className:"bg-white dark:bg-gray-800 divide-y divide-gray-200 dark:divide-gray-700",children:c.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-6 py-4 text-center text-gray-500 dark:text-gray-400",children:"No suppliers found. Add suppliers to manage your supply chain."})}):c.map(a=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 dark:text-white",children:a.supplier_name}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.contact_person}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.phone}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:a.address}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 dark:text-gray-300",children:new Date(a.created_at).toLocaleDateString()})]},a.supplier_id))})]})})}),m&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Add New Supplier"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("input",{type:"text",placeholder:"Supplier Name",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:t.name,onChange:a=>r({...t,name:a.target.value})}),e.jsx("input",{type:"text",placeholder:"Contact Person",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:t.contactPerson,onChange:a=>r({...t,contactPerson:a.target.value})}),e.jsx("input",{type:"email",placeholder:"Email",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:t.email,onChange:a=>r({...t,email:a.target.value})}),e.jsx("input",{type:"tel",placeholder:"Phone",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",value:t.phone,onChange:a=>r({...t,phone:a.target.value})}),e.jsx("textarea",{placeholder:"Address",className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-md bg-white dark:bg-gray-700 text-gray-900 dark:text-white",rows:3,value:t.address,onChange:a=>r({...t,address:a.target.value})})]}),e.jsxs("div",{className:"flex justify-end space-x-2 mt-6",children:[e.jsx("button",{onClick:()=>l(!1),className:"px-4 py-2 bg-gray-500 text-white rounded hover:bg-gray-600",children:"Cancel"}),e.jsx("button",{onClick:u,disabled:!t.name,className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 disabled:opacity-50",children:"Add Supplier"})]})]})})]})}export{j as default};
